JS.Console=new JS.Module('Console',{extend:{nameOf:function(a,b){var c=[],f,h,d,g;if(JS.isType(a,Array)){for(f=0,h=a.length;f<h;f++)c.push(this.nameOf(a[f]));return c}if(a.displayName)return a.displayName;d=[{name:null,o:b||JS.ENV}];g=0;while(typeof d==='object'&&g<this.MAX_DEPTH){g+=1;d=this.descend(d,a)}if(typeof d=='string'){d=d.replace(/\.prototype\./g,'#');a.displayName=d;if(a.__meta__)a.__meta__.displayName=d+'.__meta__'}return a.displayName},descend:function(a,b){var c=[],f=a.length,h=f,d,g,i;while(h--){g=a[h];if(JS.isType(g.o,Array))continue;i=g.name?g.name+'.':'';for(d in g.o){if(b&&g.o[d]===b)return i+d;c.push({name:i+d,o:g.o[d]})}}return c},MAX_DEPTH:4,convert:function(b,c){if(b===null||b===undefined)return String(b);var f=JS.Enumerable,c=c||[],h;if(JS.indexOf(c,b)>=0)return'#circular';if(b instanceof Error){return(typeof b.message==='string'&&!b.message)?b.name:b.name+(b.message?': '+b.message:'')}if(b instanceof Array){c.push(b);h=new f.Collection(b).map(function(a){return this.convert(a,c)},this).join(', ');c.pop();return h?'[ '+h+' ]':'[]'}if(b instanceof String||typeof b==='string')return'"'+b+'"';if(b instanceof Function)return b.displayName||b.name||(b.toString().match(/^\s*function ([^\(]+)\(/)||[])[1]||'#function';if(b instanceof Date)return b.toGMTString();if(b.toString&&b.toString!==Object.prototype.toString&&!b.toString.__traced__)return b.toString();if(b.nodeType!==undefined)return b.toString();c.push(b);h=new f.Collection(f.objectKeys(b,false).sort()).map(function(a){return this.convert(a,c)+': '+this.convert(b[a],c)},this).join(', ');c.pop();return h?'{ '+h+' }':'{}'},filterBacktrace:function(a){if(this.BROWSER){var b=new RegExp(window.location.href.replace(/(\/[^\/]+)/g,'($1)?')+'/?','g');return a.replace(b,'')}else if(this.RHINO){var b=java.lang.System.getProperty('user.dir')+'/';return a.replace(new RegExp(b,'g'),'')}else if(this.NODE){var b=process.cwd()+'/';return a.replace(new RegExp(b,'g'),'')}else if(typeof version==='function'&&version()>100){return''}else{return a}},ANSI_CSI:String.fromCharCode(0x1B)+'[',MAX_BUFFER_LENGTH:78,BROWSER:(typeof window!=='undefined'),NODE:(typeof process==='object'),RHINO:(typeof java!=='undefined'&&typeof java.lang!=='undefined'),WINDOZE:(typeof window!=='undefined'||typeof WScript!=='undefined'),WSH:(typeof WScript!=='undefined'),coloring:function(){return!(this.BROWSER&&!window.runtime)&&!this.WINDOZE},__buffer__:'',__format__:'',ESCAPE_CODES:{reset:0,bold:1,normal:22,underline:4,noline:24,blink:5,noblink:25,black:30,bgblack:40,red:31,bgred:41,green:32,bggreen:42,yellow:33,bgyellow:43,blue:34,bgblue:44,magenta:35,bgmagenta:45,cyan:36,bgcyan:46,white:37,bgwhite:47,nocolor:39,bgnocolor:49},escape:function(a){return this.ANSI_CSI+a},repeat:function(a,b){var c='';while(b--)c+=a;return c},pad:function(a,b){a=(a===undefined?'':a).toString();return a+this.repeat(' ',b-a.length)},flushFormat:function(){var a=this.__format__;this.__format__='';return a},output:function(a,b){while(a.length>0){var c=this.__buffer__.length,f=this.BROWSER?1000:this.MAX_BUFFER_LENGTH,h=(c>0&&this.coloring()),d=h?this.escape('1F')+this.escape((c+1)+'G'):'',g=a.substr(0,f-c);this.__buffer__+=g;if(this.coloring())this.writeToStdout(d+this.flushFormat()+g);else if(this.__buffer__.length===f)this.writeToStdout(this.__buffer__);if(this.__buffer__.length===f)this.__buffer__='';a=a.substr(f-c)}if(!b){if(a===''&&!this.__buffer__)this.writeToStdout(this.flushFormat()+'');if(!this.coloring()&&this.__buffer__)this.writeToStdout(this.__buffer__);this.__buffer__=''}},writeToStdout:function(a){if(this.BROWSER&&window.runtime)return window.runtime.trace(a);if(this.NODE)return console.warn(a);if(this.RHINO)return java.lang.System.out.println(a);if(this.WSH)return WScript.Echo(a);if(typeof console!=='undefined')return console.log(a);if(typeof alert==='function')return alert(a);if(typeof print==='function')return print(a)}},consoleFormat:function(){if(!JS.Console.coloring())return;this.reset();var a=arguments.length;while(a--)this[arguments[a]]()},puts:function(a){a=(a===undefined?'':a).toString();var b=JS.Console;if(b.NODE||b.RHINO){b.writeToStdout(b.flushFormat()+a);b.__print__=false}else{b.output(a,false)}},print:function(a){a=(a===undefined?'':a).toString();var b=JS.Console,c;if(b.NODE){try{c=require('util')}catch(e){c=require('sys')}c.print(b.flushFormat()+a);b.__print__=true}else if(b.RHINO){java.lang.System.out.print(b.flushFormat()+a);b.__print__=true}else{b.output(a,true)}},printTable:function(d,g){var i=[],d=[['Method','Calls']].concat(d),m=JS.Console,k=d.length,j,n;while(k--){j=d[k].length;while(j--){i[j]=i[j]||0;n=(d[k][j]===undefined?'':d[k][j]).toString();i[j]=Math.max(n.length,i[j])}}var l='+',j=i.length;while(j--)l='+'+m.repeat('-',i[j]+2)+l;l='  '+l;this.reset();this.puts();this.puts(l);var o=function(a,b){var c=d[a];this.reset();this.print('  ');for(var f=0,h=c.length;f<h;f++){this.reset();this.print('|');this.consoleFormat.apply(this,b);this.print(' '+m.pad(c[f],i[f])+' ')}this.reset();this.puts('|')};o.call(this,0,['bold']);this.reset();this.puts(l);for(var k=1,p=d.length;k<p;k++){var q=g?g(d[k],k):[];o.call(this,k,q)}this.reset();this.puts(l)}});(function(){var c=JS.Console;for(var f in c.ESCAPE_CODES)(function(b){c.define(b,function(){if(!JS.Console.coloring())return;var a=c.ESCAPE_CODES[b];c.__format__+=c.escape(a+'m')})})(f);c.extend(c)})();
//@ sourceMappingURL=console.js.map