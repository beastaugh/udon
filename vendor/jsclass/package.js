(function(){var a=(typeof this.global==='object')?this.global:this;a.JS=a.JS||{};JS.ENV=a})();JS.Package=function(a){var b=JS.Package.OrderedSet;JS.Package._6(this);this._0=a;this._4=new b();this._7=new b();this._e=new b();this._f=new b();this._5={};this._8={}};(function(f){f.displayName='Package';f.toString=function(){return f.displayName};f.log=function(a){if(typeof window==='undefined')return;if(typeof window.runtime==='object')window.runtime.trace(a);if(window.console&&console.info)console.info(a)};var q=f.OrderedSet=function(a){this._g=this.list=[];this._6={};if(!a)return;for(var b=0,c=a.length;b<c;b++)this.push(a[b])};q.prototype.push=function(a){var b=(a.id!==undefined)?a.id:a,c=this._6;if(c.hasOwnProperty(b))return;c[b]=this._g.length;this._g.push(a)};var n=f.Deferred=function(){this._h='deferred';this._i=null;this._j=[]};n.prototype.callback=function(a,b){if(this._h==='succeeded')a.call(b,this._i);else this._j.push([a,b])};n.prototype.succeed=function(a){this._h='succeeded';this._i=a;var b;while(b=this._j.shift())b[0].call(b[1],a)};f.ENV=JS.ENV;f.onerror=function(a){throw a};f._k=function(a){f.onerror(new Error(a));};var m=f.prototype,o=[['requires','_7'],['uses','_e'],['styling','_f']],p=o.length;while(p--)(function(pair){var r=pair[0],s=pair[1];m[r]=function(){var a=arguments.length,b;for(b=0;b<a;b++)this[s].push(arguments[b]);return this}})(o[p]);m.provides=function(){var a=arguments.length,b;for(b=0;b<a;b++){this._4.push(arguments[b]);f._9(arguments[b]).pkg=this}return this};m.setup=function(a){this._l=a;return this};m._s=function(a,b,c){if(this._8[a])return b.call(c);var d=this._5[a]=this._5[a]||[];d.push([b,c]);this._t()};m._3=function(a){if(this._8[a])return false;this._8[a]=true;var b=this._5[a];if(!b)return true;delete this._5[a];for(var c=0,d=b.length;c<d;c++)b[c][0].call(b[c][1]);return true};m._m=function(a){if(!a&&this.__isLoaded!==undefined)return this.__isLoaded;var b=this._4.list,c=b.length,d,g;while(c--){d=b[c];g=f._1(d,this._n);if(g!==undefined)continue;if(a)return f._k('Expected package at '+this._0+' to define '+d);else return this.__isLoaded=false}return this.__isLoaded=true};m._t=function(){if(!this._3('request'))return;this._u();var j=this._7.list.concat(this._e.list),i=this._a||[],l=(this._0||{}).length,k=this;f.when({load:j});f.when({complete:this._7.list},function(){f.when({complete:j,load:[this]},function(){this._3('complete')},this);var c=function(a){if(l===0)return d(a);l-=1;var b=k._0.length-l-1;f.Loader.loadFile(k._0[b],c,i[b])};var d=function(a){k._n=a;if(k._l)k._l();k._m(true);k._3('load')};if(this._m()){this._3('download');return this._3('load')}if(this._0===undefined)return f._k('No load path found for '+this._4.list[0]);if(typeof this._0==='function')this._0(d);else c();if(!f.Loader.loadStyle)return;var g=this._f.list,h=g.length;while(h--)f.Loader.loadStyle(g[h]);this._3('download')},this)};m._u=function(){if(this._a||!(this._0 instanceof Array)||!f.Loader.fetch)return;this._a=[];for(var a=0,b=this._0.length;a<b;a++)this._a[a]=f.Loader.fetch(this._0[a])};m.toString=function(){return'Package:'+this._4.list.join(',')};f.when=function(a,b,c){var d=[],g={},h,j,i;for(h in a){if(!a.hasOwnProperty(h))continue;g[h]=[];j=new f.OrderedSet(a[h]);i=j.list.length;while(i--)d.push([h,j.list[i],i])}var l=i=d.length;if(l===0)return b&&b.call(c,g);while(i--)(function(h){var k=f._b(h[1]);k._s(h[0],function(){g[h[0]][h[2]]=f._1(h[1],k._n);l-=1;if(l===0&&b)b.call(c,g)})})(d[i])};f._o=1;f._c={};f._d={};f._p=[];f._6=function(a){a.id=this._o;this._o+=1};f._q=function(a){var b=a.toString(),c=this._c[b];if(c)return c;if(typeof a==='string')a=[].slice.call(arguments);c=this._c[b]=new this(a);return c};f._b=function(a){if(typeof a!=='string')return a;var b=this._9(a);if(b.pkg)return b.pkg;var c=this._v(a);if(c)return c;var d=new this();d.provides(a);return d};f.remove=function(a){var b=this._b(a);delete this._d[a];delete this._c[b._0]};f._w=function(a,b){this._p.push([a,b])};f._v=function(d){var g=this._p,h=g.length,j,i,l;for(j=0;j<h;j++){i=g[j];if(!i[0].test(d))continue;l=i[1].from+'/'+d.replace(/([a-z])([A-Z])/g,function(a,b,c){return b+'_'+c}).replace(/\./g,'/').toLowerCase()+'.js';var k=new this([l]);k.provides(d);if(l=i[1].require)k.requires(d.replace(i[0],l));return k}return null};f._9=function(a){return this._d[a]=this._d[a]||{}};f._1=function(a,b){if(typeof a!=='string')return undefined;var c=b?{}:this._9(a);if(c.obj!==undefined)return c.obj;var d=b||this.ENV,g=a.split('.'),h;while(h=g.shift())d=d&&d[h];if(b&&d===undefined)return this._1(a);return c.obj=d}})(JS.Package);JS.Package.CommonJSLoader={usable:function(){return typeof require==='function'&&typeof exports==='object'},__FILE__:function(){return this._2},loadFile:function(a,b){var c=process.cwd(),d=a.replace(/\.[^\.]+$/g,''),a=require('path'),g=a.resolve(d);this._2=g+'.js';b(require(g))}};JS.Package.DomLoader={HOST_REGEX:/^https?\:\/\/[^\/]+/i,usable:function(){return!!JS.Package._1('window.document.getElementsByTagName')},__FILE__:function(){var a=document.getElementsByTagName('script');src=a[a.length-1].src,url=window.location.href;if(/^\w+\:\/+/.test(src))return src;if(/^\//.test(src))return window.location.origin+src;return url.replace(/[^\/]*$/g,'')+src},cacheBust:function(a){var b=new Date().getTime();return a+(/\?/.test(a)?'&':'?')+b},fetch:function(a){var b=a;if(JS.cacheBust)a=this.cacheBust(a);this.HOST=this.HOST||this.HOST_REGEX.exec(window.location.href);var c=this.HOST_REGEX.exec(a);if(!this.HOST||(c&&c[0]!==this.HOST[0]))return null;JS.Package.log('Loading '+a);var d=new JS.Package.Deferred(),g=this,h=window.ActiveXObject?new ActiveXObject('Microsoft.XMLHTTP'):new XMLHttpRequest();h.open('GET',a,true);h.onreadystatechange=function(){if(h.readyState!==4)return;h.onreadystatechange=g._r;d.succeed(h.responseText+'\n//@ sourceURL='+b);h=null};h.send(null);return d},loadFile:function(c,d,g){if(JS.cacheBust&&!g)c=this.cacheBust(c);var h=this,j=document.getElementsByTagName('head')[0],i=document.createElement('script');i.type='text/javascript';if(g)return g.callback(function(code){JS.Package.log('Executing '+c);eval(code);d()});JS.Package.log('Loading and executing '+c);i.src=c;i.onload=i.onreadystatechange=function(){var a=i.readyState,b=i.status;if(!a||a==='loaded'||a==='complete'||(a===4&&b===200)){d();i.onload=i.onreadystatechange=h._r;j=null;i=null}};j.appendChild(i)},loadStyle:function(a){var b=document.createElement('link');b.rel='stylesheet';b.type='text/css';b.href=a;document.getElementsByTagName('head')[0].appendChild(b)},_r:function(){}};JS.Package.RhinoLoader={usable:function(){return typeof java==='object'&&typeof require==='function'},__FILE__:function(){return this._2},loadFile:function(a,b){var c=java.lang.System.getProperty('user.dir'),d=a.replace(/\.[^\.]+$/g,'');var g=new java.io.File(c,d).toString();this._2=g+'.js';b(require(g))}};JS.Package.ServerLoader={usable:function(){return typeof JS.Package._1('load')==='function'&&typeof JS.Package._1('version')==='function'},__FILE__:function(){return this._2},loadFile:function(a,b){this._2=a;load(a);b()}};JS.Package.WshLoader={usable:function(){return!!JS.Package._1('ActiveXObject')&&!!JS.Package._1('WScript')},__FILE__:function(){return this._2},loadFile:function(a,b){this._2=a;var c=new ActiveXObject('Scripting.FileSystemObject'),d,g;try{d=c.OpenTextFile(a);g=function(){eval(d.ReadAll())};g();b()}finally{try{if(d)d.Close()}catch(e){}}}};JS.Package.XULRunnerLoader={jsloader:'@mozilla.org/moz/jssubscript-loader;1',cssservice:'@mozilla.org/content/style-sheet-service;1',ioservice:'@mozilla.org/network/io-service;1',usable:function(){try{var a=(Components||{}).classes;return!!(a&&a[this.jsloader]&&a[this.jsloader].getService)}catch(e){return false}},setup:function(){var a=Components.classes,b=Components.interfaces;this.ssl=a[this.jsloader].getService(b.mozIJSSubScriptLoader);this.sss=a[this.cssservice].getService(b.nsIStyleSheetService);this.ios=a[this.ioservice].getService(b.nsIIOService)},loadFile:function(a,b){if(window.console&&console.info)console.info('Loading '+a);this.ssl.loadSubScript(a);b()},loadStyle:function(a){var b=this.ios.newURI(a,null,null);this.sss.loadAndRegisterSheet(b,this.sss.USER_SHEET)}};(function(){var a=[JS.Package.XULRunnerLoader,JS.Package.DomLoader,JS.Package.RhinoLoader,JS.Package.CommonJSLoader,JS.Package.ServerLoader,JS.Package.WshLoader],b=a.length,c,d;for(c=0;c<b;c++){d=a[c];if(d.usable()){JS.Package.Loader=d;if(d.setup)d.setup();break}}})();JS.Package.DSL={__FILE__:function(){return JS.Package.Loader.__FILE__()},pkg:function(a,b){var c=b?JS.Package._q(b):JS.Package._b(a);c.provides(a);return c},file:function(){return JS.Package._q.apply(JS.Package,arguments)},load:function(a,b){JS.Package.Loader.loadFile(a,b)},autoload:function(a,b){JS.Package._w(a,b)}};JS.Package.DSL.files=JS.Package.DSL.file;JS.Package.DSL.loader=JS.Package.DSL.file;JS.Packages=function(a){a.call(JS.Package.DSL)};JS.cacheBust=false;JS.load=function(a,b){JS.Package.Loader.loadFile(a,function(){if(typeof b==='function')b()});return this};JS.require=function(){var b=[],c=0;while(typeof arguments[c]==='string'){b.push(arguments[c]);c+=1}var d=arguments[c],g=arguments[c+1];JS.Package.when({complete:b},function(a){if(!d)return;d.apply(g||null,a&&a.complete)});return this};
//@ sourceMappingURL=package.js.map